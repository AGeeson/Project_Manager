{% load static %}

<head>
    <title>GPM|{{ projects }}</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" />
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'popper.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
</head>

<body>

    <div class="container-fluid">
        <form method="get" action="{% url 'index' %}">
            <button href="{% url 'index' %}" type="submit" style="margin-top: 20px;">All Projects</button>
        </form>
        <h2>{{ projects }}</h2>
        <p style="font-weight: bold">Project Summary: </p>
        <p> {{ projects.description }} </p>
        <p style="font-weight: bold">Project Notes: </p>
        <p> {{ projects.notes }} </p>

        <p style="font-weight: bold">New Task:</p>
        <p>
        <form method="post" action="{% url 'projects' projects.id   %}">
            {{ form.as_p }}
            {% csrf_token %}
            <button type="submit" class="btn btn-primary  btn-lg" style="margin-top: 20px;">Add Task</button>
        </form>
        </p>
        <div class="row">
            <div class="col-2 bg-todo">
                To Do
                {% for task in todo %}
                <div class="card">
                    <div class="card-body">
                        <form id='{{ task.id }}' method="post" action="{% url 'projects' projects.id   %}">
                            {{ form.task }}
                            {% csrf_token %}
                            <p class="card-text">{{ task }}</p>
                            {% if task.essential == True %}
                            <p>Essential: <input type="checkbox" , value="clicked" , name="e{{task.id}}" checked></p>
                            {% else %}
                            <p>Essential: <input type="checkbox" , value="clicked" , name="e{{task.id}}"></p>
                            {% endif %}

                            <select name="c{{task.id}}" id="id_progress">
                                <option value="To Do" selected>To Do</option>
                                <option value="In Progress">In Progress</option>
                                <option value="To Verify">To Verify</option>
                                <option value="Bugged">Bugged</option>
                                <option value="Completed">Completed</option>
                            </select>
                            <button type="submit" name="save" , value="save" style="margin-top: 20px;">Save</button>
                        </form>
                        <form action="{% url 'task_delete' task.id %}" method="post">
                            {% csrf_token %}
                            <input class="card-link" type="submit" value="Delete task">
                        </form>
                        <p>Created: {{task.date_added|date:"M d, Y" }}</p>
                    </div>
                </div>
                {% endfor %}

            </div>
            <div class="col-2 bg-inprogress">In Progress
                {% for task in inprogress %}
                <div class="card">
                    <div class="card-body">
                        <form id='{{ task.id }}' method="post" action="{% url 'projects' projects.id   %}">
                            {{ form.task }}
                            {% csrf_token %}
                            <p class="card-text">{{ task }}</p>
                            {% if task.essential == True %}
                            <p>Essential: <input type="checkbox" , value="clicked" , name="e{{task.id}}" checked></p>
                            {% else %}
                            <p>Essential: <input type="checkbox" , value="clicked" , name="e{{task.id}}"></p>
                            {% endif %}

                            <select name="c{{task.id}}" id="id_progress">
                                <option value="To Do" selected>To Do</option>
                                <option value="In Progress">In Progress</option>
                                <option value="To Verify">To Verify</option>
                                <option value="Bugged">Bugged</option>
                                <option value="Completed">Completed</option>
                            </select>
                            <button type="submit" name="save" , value="save" style="margin-top: 20px;">Save</button>
                        </form>
                        <form action="{% url 'task_delete' task.id %}" method="post">
                            {% csrf_token %}
                            <input class="card-link" type="submit" value="Delete task">
                        </form>
                        <p>Created: {{task.date_added|date:"M d, Y" }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div class="col-2 bg-bugged">Bug/Impass
                {% for task in bugged %}
                <div class="card">
                    <div class="card-body">
                        <form id='{{ task.id }}' method="post" action="{% url 'projects' projects.id   %}">
                            {{ form.task }}
                            {% csrf_token %}
                            <p class="card-text">{{ task }}</p>
                            {% if task.essential == True %}
                            <p>Essential: <input type="checkbox" , value="clicked" , name="e{{task.id}}" checked></p>
                            {% else %}
                            <p>Essential: <input type="checkbox" , value="clicked" , name="e{{task.id}}"></p>
                            {% endif %}

                            <select name="c{{task.id}}" id="id_progress">
                                <option value="To Do" selected>To Do</option>
                                <option value="In Progress">In Progress</option>
                                <option value="To Verify">To Verify</option>
                                <option value="Bugged">Bugged</option>
                                <option value="Completed">Completed</option>
                            </select>
                            <button type="submit" name="save" , value="save" style="margin-top: 20px;">Save</button>
                        </form>
                        <form action="{% url 'task_delete' task.id %}" method="post">
                            {% csrf_token %}
                            <input class="card-link" type="submit" value="Delete task">
                        </form>
                        <p>Created: {{task.date_added|date:"M d, Y" }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div class="col-2 bg-toverify">To Verify
                {% for task in toverify %}
                <div class="card">
                    <div class="card-body">
                        <form id='{{ task.id }}' method="post" action="{% url 'projects' projects.id   %}">
                            {{ form.task }}
                            {% csrf_token %}
                            <p class="card-text">{{ task }}</p>
                            {% if task.essential == True %}
                            <p>Essential: <input type="checkbox" , value="clicked" , name="e{{task.id}}" checked></p>
                            {% else %}
                            <p>Essential: <input type="checkbox" , value="clicked" , name="e{{task.id}}"></p>
                            {% endif %}

                            <select name="c{{task.id}}" id="id_progress">
                                <option value="To Do" selected>To Do</option>
                                <option value="In Progress">In Progress</option>
                                <option value="To Verify">To Verify</option>
                                <option value="Bugged">Bugged</option>
                                <option value="Completed">Completed</option>
                            </select>
                            <button type="submit" name="save" , value="save" style="margin-top: 20px;">Save</button>
                        </form>
                        <form action="{% url 'task_delete' task.id %}" method="post">
                            {% csrf_token %}
                            <input class="card-link" type="submit" value="Delete task">
                        </form>
                        <p>Created: {{task.date_added|date:"M d, Y" }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div class="col-2 bg-success">Complete
                {% for task in completed %}
                <div class="card">
                    <div class="card-body">
                        <form id='{{ task.id }}' method="post" action="{% url 'projects' projects.id   %}">
                            {{ form.task }}
                            {% csrf_token %}
                            <p class="card-text">{{ task }}</p>
                            {% if task.essential == True %}
                            <p>Essential: <input type="checkbox" , value="clicked" , name="e{{task.id}}" checked></p>
                            {% else %}
                            <p>Essential: <input type="checkbox" , value="clicked" , name="e{{task.id}}"></p>
                            {% endif %}

                            <select name="c{{task.id}}" id="id_progress">
                                <option value="To Do" selected>To Do</option>
                                <option value="In Progress">In Progress</option>
                                <option value="To Verify">To Verify</option>
                                <option value="Bugged">Bugged</option>
                                <option value="Completed">Completed</option>
                            </select>
                            <button type="submit" name="save" , value="save" style="margin-top: 20px;">Save</button>
                        </form>
                        <form action="{% url 'task_delete' task.id %}" method="post">
                            {% csrf_token %}
                            <input class="card-link" type="submit" value="Delete task">
                        </form>
                        <p>Created: {{task.date_added|date:"M d, Y" }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div class="col-2 bg-sidebar">SideBar</div>